USE [master]

CREATE DATABASE Academy

USE [Academy]

CREATE TABLE CURATORS
(
	ID BIGINT NOT NULL IDENTITY(1,1) PRIMARY KEY,
	[NAME] NVARCHAR(MAX) NOT NULL CHECK ([NAME] != ''),
	SURNAME NVARCHAR(MAX) NOT NULL CHECK (SURNAME != '')
)


CREATE TABLE FACULTIES
(
	ID BIGINT NOT NULL IDENTITY(1,1) PRIMARY KEY,
	FINANCING MONEY NOT NULL DEFAULT 0 CHECK (FINANCING >= 0),
	[NAME] NVARCHAR(100) NOT NULL CHECK ([NAME] != ''),
	CONSTRAINT UQ_FACULTIES_NAME UNIQUE ([NAME])
)

CREATE TABLE DEPARTMENTS
(
	ID BIGINT NOT NULL IDENTITY(1,1) PRIMARY KEY,
	FINANCING MONEY NOT NULL DEFAULT 0 CHECK (FINANCING >= 0),
	[NAME] NVARCHAR(100) NOT NULL CHECK ([NAME] != ''),
	[FACULTY IDENTIFIER] BIGINT NOT NULL FOREIGN KEY REFERENCES [FACULTIES](ID),
	CONSTRAINT UQ_DEPARTMENTS_NAME UNIQUE ([NAME])
)

CREATE TABLE GROUPS
(
	ID BIGINT NOT NULL IDENTITY(1,1) PRIMARY KEY,
	[NAME] NVARCHAR(10) NOT NULL CHECK ([NAME] != ''),
	[YEAR] INT NOT NULL CHECK ([YEAR] BETWEEN 1 AND 5),
	[DEPARTMENT IDENTIFIER] BIGINT NOT NULL FOREIGN KEY REFERENCES [DEPARTMENTS](ID),
	CONSTRAINT UQ_GROUPS_NAME UNIQUE ([NAME])
)


CREATE TABLE [Groups and Curators]
(
	ID BIGINT NOT NULL IDENTITY(1,1) PRIMARY KEY,
	[CURATOR IDENTIFIER] BIGINT NOT NULL FOREIGN KEY REFERENCES [CURATORS](ID),
	[GROUP IDENTIFIER] BIGINT NOT NULL FOREIGN KEY REFERENCES [GROUPS](ID)
)


CREATE TABLE SUBJECTS
(
	ID BIGINT NOT NULL IDENTITY(1,1) PRIMARY KEY,
	[NAME] NVARCHAR(100) NOT NULL CHECK([NAME] != ''),
	CONSTRAINT UQ_SUBJECTS_NAME UNIQUE ([NAME])
)



CREATE TABLE TEACHERS
(
	ID BIGINT NOT NULL IDENTITY(1,1) PRIMARY KEY,
	[NAME] NVARCHAR(MAX) NOT NULL CHECK ([NAME] != ''),
	SALARY MONEY NOT NULL CHECK (SALARY > 0),
	SURNAME NVARCHAR(MAX) NOT NULL CHECK (SURNAME != '')
)

CREATE TABLE LECTURES
(
	ID BIGINT NOT NULL IDENTITY(1,1) PRIMARY KEY,
	CLASSROOM NVARCHAR(MAX) NOT NULL CHECK (CLASSROOM != ''),
	[SUBJECT IDENTIFIER] BIGINT NOT NULL FOREIGN KEY REFERENCES [SUBJECTS](ID),
	[TEACHER IDENTIFIER] BIGINT NOT NULL FOREIGN KEY REFERENCES [TEACHERS](ID)
)

CREATE TABLE [Groups and Lectures]
(
	ID BIGINT NOT NULL IDENTITY(1,1) PRIMARY KEY,
	[GROUP IDENTIFIER] BIGINT NOT NULL FOREIGN KEY REFERENCES [GROUPS](ID),
	[LECTURE IDENTIFIER] BIGINT NOT NULL FOREIGN KEY REFERENCES [LECTURES](ID)
)